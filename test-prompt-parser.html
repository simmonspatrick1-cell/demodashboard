<!DOCTYPE html>
<html>
<head>
    <title>Test Prompt Parser</title>
</head>
<body>
    <h1>Prompt Parser Test</h1>
    <button id="testPS">Test PS Prompts</button>
    <button id="testComprehensive">Test Comprehensive Prompts</button>
    <pre id="output"></pre>

    <script type="module">
        import { loadPromptsFromURL, convertToDashboardFormat } from './src/promptParser.js';

        const output = document.getElementById('output');

        document.getElementById('testPS').addEventListener('click', async () => {
            output.textContent = 'Loading PS prompts...\n';
            try {
                const parsed = await loadPromptsFromURL('/prompts-ps.html');
                output.textContent += `Categories: ${parsed.categories.length}\n`;
                output.textContent += `Total Prompts: ${parsed.allPrompts.length}\n\n`;

                parsed.categories.forEach(cat => {
                    output.textContent += `${cat.name}: ${cat.prompts.length} prompts\n`;
                });

                const dashboard = convertToDashboardFormat(parsed);
                output.textContent += `\n\nDashboard format keys: ${Object.keys(dashboard).length}\n`;
                output.textContent += JSON.stringify(Object.keys(dashboard), null, 2);
            } catch (error) {
                output.textContent += `Error: ${error.message}\n${error.stack}`;
            }
        });

        document.getElementById('testComprehensive').addEventListener('click', async () => {
            output.textContent = 'Loading Comprehensive prompts...\n';
            try {
                const parsed = await loadPromptsFromURL('/prompts-source.html');
                output.textContent += `Categories: ${parsed.categories.length}\n`;
                output.textContent += `Total Prompts: ${parsed.allPrompts.length}\n\n`;

                parsed.categories.forEach(cat => {
                    output.textContent += `${cat.name}: ${cat.prompts.length} prompts\n`;
                });

                const dashboard = convertToDashboardFormat(parsed);
                output.textContent += `\n\nDashboard format keys: ${Object.keys(dashboard).length}\n`;
                output.textContent += JSON.stringify(Object.keys(dashboard), null, 2);
            } catch (error) {
                output.textContent += `Error: ${error.message}\n${error.stack}`;
            }
        });
    </script>
</body>
</html>
